machine:
  node:
    version: v6.1.0

experimental:
  notify:
    branches:
      only:
        - master
        - integration
        - qa
        - demo

dependencies:
  override:
    - cp ~/.ssh/id_circleci_github ~/.ssh/id_rsa
    - git clone ssh://git@innersource.accenture.com/tpmmdshj/tpmmdsfdc.git
    - mv tpmmdsfdc/src src
    - npm install
    - npm run package
    - sh build/installPMD.sh

test:
  override:
    - sh build/scanSRCFolder.sh
    - npm run deploy

deployment:
  production:
    branch: /.*/
    commands:
      - npm run destroy
